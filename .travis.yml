language: java
install: true

git:
  depth: false

jdk:
- openjdk8

addons:
  sonarcloud:
    organization: "lucacampanella-github"
    token:
      secure: "38k0GaHE+ls7Gxr8/Jcdr8147f50wbsBfae3te02Fs2NFW3Opz2Q1OyHZtLAZMQrn+JtfxFKpy8TwssTy5/0JxFdbwYUTr253lGGN7eJSx/k8DiWYsuUcAUOqlnRLdP8/HwlAVyiI1eP/qsQCMTqO0xVqjDDc1A4cn7PDxnZQc+udBGSVm5mpg3SjLDqGq0yiMZU+Na+UW/Xo4OhGBOLUN3/m3lZPW3nsX8qP5prqmiB9F+1EHJ15MOIGpy7xIJkXMvaKFSAUvETVznT8k+Fbep1BtmIFH3uPiZFcA7YXl9Hx7Nl9Qchk1wDIVCgHMiekCwYZaqLOdtlNpadIB2/GtT/LvjPaSkN7HHbZVS4yeKTQj+c+OToTXRRD8ECLKTytOtwiDnPc4vyx8/Rl0bWgitoeo2VZLynG2vfKbUHra5s4wDgxDc/c2zvQJV9tIZ8RWQ9rgHqCFDnDjZUh/6wO8sImXq2okQKvfo8lsr5LqQ6TEO8Lf4hdZ+SxzRU8ZoJnO1pq2ASP8QV9/iE+0jAUqMhTA4gHipECWVWWMDiRphyJkZFVf9Rr9OuR7Ps1Wrm4lCoq3k5hHH8+8Vtnf9IZl+58pVjoGzPbvKiGyRgQarKCyPsj7dlMSF0/BSJu6WL3fZ2jhAX2dVs8pR9BRSkDF9BXUm7TdUkyWBdhok1oXk="

script:
  - ./gradlew --no-daemon --scan -s build --info publishToMavenLocal sonarqube

deploy:
  - provider: script
    script: ./gradlew -s publish --info
    skip-cleanup: true
    on:
      branch: master
  - provider: script
    script: ./gradlew -s publish --info
    skip-cleanup: true
    on:
      tags: true

before_cache:
- rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -fr $HOME/.gradle/caches/*/plugin-resolution/

cache:
  directories:
  - "$HOME/.gradle/caches/"
  - "$HOME/.gradle/wrapper/"
env:
  global:
  #jfrog key
   - secure: "pqDKDGFT1WLieMgc7mP1wp55PPrkagi4kpV/8iXaAK4T/cgw9Y+qN6OaDCYpqyN4oimoMJUxyNMDnrGjsjbyRTdoHenx6iBE4PlBhIwNviitbxNfO/BTakYgKadVjJx1mx/8DSeywbzfhnnh5zFBsCsPcvmBWqEpeowhR4bRLIHlV5ojZuTHMBtIIJOKru277+OyklnXCWceHsIEitXoFmELf7YHsA/30EQokBT6VAnSJTNj+1xqRCrd/z8c96QYFwmY9d4oBtMNQQIThXvkaiZS6t80CihmD1sPuAdDsrqB1+qIXDw47OnzShN7OeW8zybCqPmrCEH/EpWOVJw49258Doi+1vFs0CP3fADRbABh7qv1FvAdlgtMSf7q3+X+rNtkS6DBZxnaNugwwuZkUd81B1oaX8r5123Dt1yXaFYcB9mnS8JqKeHV68/r9M1kjrQ6u/83Ux0GqJ3j/vMeMQsPFfUjDauO0VP2INErtzYCU0qCteaRtA40+/ZDSv9W1Z5EIz8x5/OnU7vvlH3NrJVmrii9XG+ODj1iOcWGMtGx6U8YA9OBLoRqoZMelh2sRArStz8nv/vRliIXGHbuChrw9lAcUuCTeNdkC1pkMnGXZj7at+lUaRfYoudT/90HNxspJEPhOMdM0LglbI0euofPkbaZ7ose9k/8fUtocI0="#  #grgit
#  - secure: ehFEn6LViQ1mdqfr4LkGAUJ0TL/qRSinwMRAGhEIb4GT8Iqg+Y8uzaCYMRlBhRZxIYNLWhNQ3RaHTmAQozcwvRHwlhZOBy83kd9/jZFFpOjn0JHJ1ab9TWhdDlEhH0S7SagsBpqbbMxaMFzEtouTzoTIgykV+S2iQay9UV38rsI6ck1zcyxe7nVSP19jWiDMfESWzCUzXxqW1GeE8j6KYy34FpI0I3g4fHUh7AwzZe0WgSO54inhrPrZSHwA+efz8BJ42vQxk1UXcbPv+Gu7MCiDL8cK6j9zl2+djakmuDmMYDcPF0IhDhzSnd1S8DcYZPokA94qev4vnL0ZE1g4iIbj2PTx4s3wmqDMVLKDZ4KdbJcIM4/mdSeudyv5vgdSuJkke7irFoadgiT7hOOjcBsvQrMLClUP3yX+15zWthLR9NTrEmXRtKiLvT00iQ6p5J35MUUynF5gM4nb/YXGfzFc/dwzwCrvFBGYOEJJ8Of6recseYCtC7Ccc1MF0wOFUQyZVvSDOhD0yAqfCSKuiJjF91P0RC9Q41pGZkeu11GKuLdnTegC0GZALYH6NQYqGRmOFQtGMROULf21QafpntWm74nko+iSRWuy2TTUi5/2juE2SYwJSAMfD/tXlQvcjwPlHZWRvjhYYwNYeI9pBr11EFXIylvaVC+eLc4Qybk=
#  - secure: KuU76dpgxvQU4Z4+sFvsAUcyQq0X74/HVbAUv6AlJEa+cF7CF7Yh5kegwblBD/7AKY//Q7+jYPiv/X9TkLuDx51HUZbOOPxGx364u9nNPSpVggPyVgqLC6vkb5O4VxX5dNmKRugbkYhmZI/yZmzivR/HFSXvfvjmy5N27tBx1fwTpsD3iGjc1sl5srz2JCwqsRN04kCPXtDA49tM1yv11pf/2UVs6jr1DFM9JJZFdV1VPdrh+3wOg8cZr0mon9ibXg/jpoLSPKWm4Ova3RZmXgWAq5Xkiv55h485ukwpYak8VUu4DH3PEoy1Rwib/IKu/XYjtxJAeQbIDZPYeJhhUfC821xx+Vl4ARgnS40fRxCSmYV49XthQSjRBwWV2z4aqX1HVwQaY6zeag93CzylfeRXltXtRXn1qrbx7GBVnH42lgzORXdfHbLTj15IpTFXj8VoEpxKb1yGIjo2HjwD9rl9HIT9/tmajDFfWfASHrHs5iCeFKJTr+fNYdqLwwMmgvJzyK62rrO+NxcgfvXiehdqGqsST9h+QOp076nQKBjxFesCi/x+gV0C0HXhTaZWidNSGgAmspHhanpqVsOEnSbbFW5Tvf7+XD8E9QQUzAFDMM5ouyMBtzAMS6OZrmxj2vzmlsQkzGENgUofDH9w791Vh8nwC8VjOBf+Rn6aQdQ=
