language: java
install: true

git:
  depth: false

jdk:
- openjdk8

addons:
  sonarcloud:
    organization: "lucacampanella-github"
    token:
      secure: "38k0GaHE+ls7Gxr8/Jcdr8147f50wbsBfae3te02Fs2NFW3Opz2Q1OyHZtLAZMQrn+JtfxFKpy8TwssTy5/0JxFdbwYUTr253lGGN7eJSx/k8DiWYsuUcAUOqlnRLdP8/HwlAVyiI1eP/qsQCMTqO0xVqjDDc1A4cn7PDxnZQc+udBGSVm5mpg3SjLDqGq0yiMZU+Na+UW/Xo4OhGBOLUN3/m3lZPW3nsX8qP5prqmiB9F+1EHJ15MOIGpy7xIJkXMvaKFSAUvETVznT8k+Fbep1BtmIFH3uPiZFcA7YXl9Hx7Nl9Qchk1wDIVCgHMiekCwYZaqLOdtlNpadIB2/GtT/LvjPaSkN7HHbZVS4yeKTQj+c+OToTXRRD8ECLKTytOtwiDnPc4vyx8/Rl0bWgitoeo2VZLynG2vfKbUHra5s4wDgxDc/c2zvQJV9tIZ8RWQ9rgHqCFDnDjZUh/6wO8sImXq2okQKvfo8lsr5LqQ6TEO8Lf4hdZ+SxzRU8ZoJnO1pq2ASP8QV9/iE+0jAUqMhTA4gHipECWVWWMDiRphyJkZFVf9Rr9OuR7Ps1Wrm4lCoq3k5hHH8+8Vtnf9IZl+58pVjoGzPbvKiGyRgQarKCyPsj7dlMSF0/BSJu6WL3fZ2jhAX2dVs8pR9BRSkDF9BXUm7TdUkyWBdhok1oXk="

script:
  - ./gradlew --no-daemon --scan -s build --info publishToMavenLocal sonarqube

deploy:
  - provider: script
    script: ./gradlew -s publish
    skip-cleanup: true
    on:
      branch: master
  - provider: script
    script: ./gradlew -s publish
    skip-cleanup: true
    on:
      tags: true

before_cache:
- rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -fr $HOME/.gradle/caches/*/plugin-resolution/

cache:
  directories:
  - "$HOME/.gradle/caches/"
  - "$HOME/.gradle/wrapper/"
env:
  global:
  #jfrog key
  - secure: MwQmYbzHC7NqM4NXSD90JuRU9StvTAH6LDzIHus+8IM4e/UvlsxbYatnhqyR2MwCoWhk3wUni08xCKH0gbf7UiysMng+Hiq5ah4UJ+/BSV7GpG5Lf/G4GBHTLN06lBzP0a5CLcMhxRoD969+J8PbmpiITsT+V9emjfVHuCpKGJB1fwhilH0TvpNUJ//FVsd0w8L/hUJpge3FBYVr3JTEApIHCTNmz/LiuGTnDoYNvHk1WPoC3Cpo9kH4r3fiwAPIhswaYP5L/JWdBibqf3DAWZJ4JQfKRYne4JBHWSyh7pAVU9pZn6hgzZkAAz351oIEYMnECss8m9UjtxoH8B22fJsHaoovyyEYnk+9w1hIb/GS2jMoDuYR3Psyj/OtYByzpF4IxvRHnP5EpWKtMKjq0N0/wXVP722W5M1oDmvNa6DXFlYVPnkSkkNhe7yHEL1ZsHFyHs6cRjHOX/N/XQbbj4wAAh/a0bBaI99Fe9r2L3bZRx1IRdmHi/LJmC2oaC7Mpes8EGpDkPBofOBVk0tZJ63sFqeVOgmbYZTfGnSmJ36y+7i9xvOnnEyP/X6glF7M7Wgky48EyOOXjxwWSCHtfkHgrGCb03xOORd5fl2/UIe2JlxVdZdFuXLIMhm7cR4+uCXQJNXACfrwLK5dpgecgsh6waKJ32BflPvuslknDdM=
  #grgit
  - secure: ehFEn6LViQ1mdqfr4LkGAUJ0TL/qRSinwMRAGhEIb4GT8Iqg+Y8uzaCYMRlBhRZxIYNLWhNQ3RaHTmAQozcwvRHwlhZOBy83kd9/jZFFpOjn0JHJ1ab9TWhdDlEhH0S7SagsBpqbbMxaMFzEtouTzoTIgykV+S2iQay9UV38rsI6ck1zcyxe7nVSP19jWiDMfESWzCUzXxqW1GeE8j6KYy34FpI0I3g4fHUh7AwzZe0WgSO54inhrPrZSHwA+efz8BJ42vQxk1UXcbPv+Gu7MCiDL8cK6j9zl2+djakmuDmMYDcPF0IhDhzSnd1S8DcYZPokA94qev4vnL0ZE1g4iIbj2PTx4s3wmqDMVLKDZ4KdbJcIM4/mdSeudyv5vgdSuJkke7irFoadgiT7hOOjcBsvQrMLClUP3yX+15zWthLR9NTrEmXRtKiLvT00iQ6p5J35MUUynF5gM4nb/YXGfzFc/dwzwCrvFBGYOEJJ8Of6recseYCtC7Ccc1MF0wOFUQyZVvSDOhD0yAqfCSKuiJjF91P0RC9Q41pGZkeu11GKuLdnTegC0GZALYH6NQYqGRmOFQtGMROULf21QafpntWm74nko+iSRWuy2TTUi5/2juE2SYwJSAMfD/tXlQvcjwPlHZWRvjhYYwNYeI9pBr11EFXIylvaVC+eLc4Qybk=
  - secure: KuU76dpgxvQU4Z4+sFvsAUcyQq0X74/HVbAUv6AlJEa+cF7CF7Yh5kegwblBD/7AKY//Q7+jYPiv/X9TkLuDx51HUZbOOPxGx364u9nNPSpVggPyVgqLC6vkb5O4VxX5dNmKRugbkYhmZI/yZmzivR/HFSXvfvjmy5N27tBx1fwTpsD3iGjc1sl5srz2JCwqsRN04kCPXtDA49tM1yv11pf/2UVs6jr1DFM9JJZFdV1VPdrh+3wOg8cZr0mon9ibXg/jpoLSPKWm4Ova3RZmXgWAq5Xkiv55h485ukwpYak8VUu4DH3PEoy1Rwib/IKu/XYjtxJAeQbIDZPYeJhhUfC821xx+Vl4ARgnS40fRxCSmYV49XthQSjRBwWV2z4aqX1HVwQaY6zeag93CzylfeRXltXtRXn1qrbx7GBVnH42lgzORXdfHbLTj15IpTFXj8VoEpxKb1yGIjo2HjwD9rl9HIT9/tmajDFfWfASHrHs5iCeFKJTr+fNYdqLwwMmgvJzyK62rrO+NxcgfvXiehdqGqsST9h+QOp076nQKBjxFesCi/x+gV0C0HXhTaZWidNSGgAmspHhanpqVsOEnSbbFW5Tvf7+XD8E9QQUzAFDMM5ouyMBtzAMS6OZrmxj2vzmlsQkzGENgUofDH9w791Vh8nwC8VjOBf+Rn6aQdQ=
